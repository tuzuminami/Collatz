# Collatz ビジュアライザー

Flask を利用したシンプルな Web アプリケーションです。正の整数を入力すると、Collatz 数列の各ステップを計算し、計算過程をテーブルと棒グラフで確認できます。

## Mac での起動手順（初心者向け）

以下の手順は、Mac を初めて扱う方でも迷わないように細かく記載しています。順番に進めてください。

### 1. ターミナルを開く

1. Dock（画面下のアイコンが並んでいるバー）で「Finder」を開きます。
2. メニューバーから「移動」>「ユーティリティ」を選択します。
3. 「ターミナル」というアプリをダブルクリックすると黒い画面のウィンドウが開きます。ここで以降のコマンドを入力します。

### 2. Python の準備

1. ターミナルに次のコマンドを入力し、Enter キーを押します。

   ```bash
   python3 --version
   ```

2. `Python 3.10.x` などと表示されれば OK です。もし「コマンドが見つかりません」等のメッセージが表示された場合は、<https://www.python.org/downloads/macos/> からインストーラーをダウンロードして Python 3.10 以上をインストールしてください。インストール後は再び上記コマンドでバージョンを確認します。

### 3. プロジェクトの準備

1. まずはこのアプリの元となるファイル一式を Mac に取り込みます。以下のどちらかの方法を選んでください。
   - **ブラウザから ZIP ファイルをダウンロードする場合**
     1. ブラウザでこのプロジェクトの GitHub ページを開きます。
     2. 画面右上付近にある緑色の「Code」ボタンをクリックし、「Download ZIP」を選択します。
     3. ダウンロードが始まり、通常は「ダウンロード」フォルダに `Collatz-main.zip` などのファイルが保存されます。
     4. Finder で「ダウンロード」フォルダを開き、ZIP ファイルをダブルクリックすると `Collatz-main` というフォルダが展開されます。
   - **Git コマンドで取得する場合**（Git の使い方に慣れている方向け）
     1. ターミナルで以下のコマンドを入力します（URL は必要に応じて置き換えてください）。

        ```bash
        git clone https://github.com/tuzuminami/Collatz.git
        ```

    2. クローンが完了すると、実行した場所に `Collatz` フォルダが作成されます。
2. ターミナルでダウンロードまたはクローンしたフォルダに移動します。たとえば「ダウンロード」フォルダに保存している場合は、以下のように入力します（`ユーザー名` の部分は自分の Mac のユーザー名に置き換えてください）。ZIP を展開した場合は `Collatz-main`、`git clone` した場合は `Collatz` など、実際にあるフォルダ名に読み替えてください。

   ```bash
   cd /Users/ユーザー名/Downloads/Collatz-main
   ```

### 4. 仮想環境の作成と起動

1. 依存パッケージを管理するために仮想環境を作成します。ターミナルで次のコマンドを入力し、それぞれ Enter キーを押してください。

   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```

   2 行目を実行すると、ターミナルの左側に `(.venv)` のような表示が付いて仮想環境が有効になります。

2. 仮想環境が有効になった状態で、必要なパッケージをインストールします。

   ```bash
   pip install -r requirements.txt
   ```

   インストールが完了するまで数十秒待ちます。

### 5. アプリケーションの起動

1. 仮想環境が有効なまま、次のコマンドを入力してアプリを起動します。

   ```bash
   python3 collatz.py
   ```

2. 「 * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit) 」のようなメッセージが表示されたら起動成功です。
3. Mac のブラウザ（Safari や Chrome など）を開き、アドレスバーに `http://127.0.0.1:5000` と入力してアクセスするとアプリを利用できます。

### 6. アプリケーションの終了

1. アプリを止めるときは、起動させたターミナルのウィンドウで `Control` キーを押しながら `C` キーを押します（`Ctrl + C`）。
2. 仮想環境を終了したい場合は、次のコマンドを入力します。

   ```bash
   deactivate
   ```

これで作業が完了です。毎回アプリを利用するときは、手順 4 の 2 行目（仮想環境の有効化）から順に実施してください。

## 使い方

1. フォームに 1 以上の整数を入力します。
2. 「計算する」を押すと Collatz 数列の計算が始まります。
3. 計算結果はステップごとの表と、値の変化を示す棒グラフで表示されます。各ステップは 1 秒間隔で順次更新されるため、計算過程を視認しやすくなっています。
4. ステップ数が 1000 回を超える場合は安全のため途中で停止し、その旨が通知されます。
